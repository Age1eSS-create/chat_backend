

# Chat backend

## Installation

```
npm i
```

## API
Аутентификация:
Входные параметры -  JSON с полями login , password   
Возвращает - JSON с информацией о пользователе { id, type, login, name, friends, gender}
```
/auth
```
Получение информации о пользователе:  
Возвращает - JSON с информацией о пользователе { id, type, login, name, friends, gender}
```
/user
```
Получение всех пользователей:   
Возвращает - массив объектов с информацией о пользователе { id, type, login, name, gender}
```
/users
```
Добавление в друзья:  
Входные параметры -  JSON с полем id  
Возвращает - code 200 при умешном добавлении  
```
/friend
```
### WS  
Открывает веб сокет для получения сообщений в общей комнате  
Возвращает - массив объектов с информацией о сообщении {id, user_id, text, date, room_id, name, user_type, gender}  
```
get messages
```
Веб сокет для отправки сообщений в общую комнату   
Входные параметры - JSON с полями {user_id, text, date}  
```
chat message
```
Присоединение в отдельную приватную комнату  
Входные параметры - id комнаты  
Возвращает - массив объектов с информацией о сообщении { id, user_id, text, file, date, room_id, name, user_type, gender } 
```
joinRoom
```
Отправка сообщений в приватную комнату  
Входные параметры - JSON с полями {room_id, user_id, text, date}     
Возвращает - массив объектов с информацией о сообщении { id, user_id, text, file, date, room_id, name, user_type, gender }   
```
joinRoom
```
### Работа с файлами  
Принимает файла, заргружает его на сервер и добавляет в базу  
```
/upload
```
Ссылка на скачивание выбранного файла  
id - название файла  
Возвращает - ссылку для скачивания 
```
/:id/download
```

